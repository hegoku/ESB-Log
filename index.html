<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<script src="../js/jquery-2.1.1.min.js"></script>
	<script src="js/CVar.js"></script>
	<script src="js/CLinkList.js"></script>
	<script src="js/a.js"></script>
</head>
<body>
	<div style="float:left;">
		CPY:<br />
		<textarea rows="50" cols="80" id="cpy"></textarea>
	</div>
	<div  style="float:left;">
		String:<br />
		<textarea rows="50" cols="50" id="stream"></textarea>
	</div>
	<div  style="float:left;">
		Result:<br />
		<div></div>
	</div>
	<a href="#" onclick="geta()">aa</a>
	<script>
		function geta(){
			console.clear();
			theSy=-1;
			thePoint=-1;
			currentVar;
			nextState="readLayout";
			var a=$("#cpy").val();
			var str=$("#stream").val();
			var lines=a.split('\n');
			getValueStart=0
			var nodeHead=LinkList.createNew();
			for(var i=0;i<lines.length;i++){
				haha(lines[i],str,getValueStart,nodeHead);
			}
			printLink(nodeHead);
		}
		
		function haha(line,str,getValueStart,head){
			var position=new Object();
			position.value=0;
			while(position.value!=line.length){
				pharse(line,position);
			}
			if(nextState!="End"){
				return 0;
			}else{
				nextState='readLayout';
			}
			if(currentVar!=null){
				addLink(head,currentVar);
			}
			/*if(currentVar.times!=0){
				console.log(currentVar.layout+" "+currentVar.variablename+" "+currentVar.times);
				console.log("===============================================================");	
			}else if(currentVar.len!=0){
				currentVar.value=inputValue(currentVar,str,getValueStart,currentVar.len);
				getValueStart+=currentVar.len;
				if(currentVar.point!=-1){
					getValueStart--;
				}
				if(currentVar.sy!=-1){
					getValueStart--;
				}
				console.log(currentVar.layout+" "+currentVar.variablename+" "+currentVar.len+" : "+currentVar.value);
			}else if(currentVar!=null){
				console.log(currentVar.layout+" "+currentVar.variablename);
			}*/
		}
	</script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<script src="../js/jquery-2.1.1.min.js"></script>
	<script src="js/CVar.js"></script>
	<script src="js/a.js"></script>
</head>
<body>
	<div style="float:left;">
		CPY:<br />
		<textarea rows="50" cols="80" id="cpy"></textarea>
	</div>
	<div  style="float:left;">
		String:<br />
		<textarea rows="50" cols="50" id="stream"></textarea>
	</div>
	<div  style="float:left;">
		Result:<br />
		<div></div>
	</div>
	<a href="#" onclick="geta()">aa</a>
	<script>
		function geta(){
			console.clear();
			position=0;
			theSy=-1;
			thePoint=-1;
			currentVar;
			nextState="readLayout";
			var a=$("#cpy").val();
			var str=$("#stream").val();
			var lines=a.split('\n');
			var getValueStart=0;
			for(var i=0;i<lines.length;i++){
				while(position!=lines[i].length){
					pharse(lines[i]);
				}
				if(nextState!="End"){
					position=0;
					continue;
				}else{
					nextState='readLayout';
					position=0;
				}
				if(currentVar.times!=0){
					console.log(currentVar.layout+" "+currentVar.variablename+" "+currentVar.times);
				}else if(currentVar.len!=0){
					currentVar.value=inputValue(currentVar,str,getValueStart,currentVar.len);
					getValueStart+=currentVar.len;
					if(currentVar.point!=-1){
						getValueStart--;
					}
					if(currentVar.sy!=-1){
						getValueStart--;
					}
					console.log(currentVar.layout+" "+currentVar.variablename+" "+currentVar.len+" : "+currentVar.value);
				}else if(currentVar!=null){
					console.log(currentVar.layout+" "+currentVar.variablename);
				}
			}
		}
	</script>
</body>
</html>